from typing import Union
import uinput
from devices import allkeys as key
from dataclasses import dataclass


@dataclass(frozen=True)
class KeyboardInterface:

    devicename: str
    usbVendor: int
    usbProduct: int
    usbInterface: int

    macroKeys: dict # dict[bytes, str]
    memoryKeys: dict # dict[bytes, str]
    releaseEvents: str # str[bytes]

    numMacroKeys: int
    numMemoryKeys: int # number of memory / profile keys


@dataclass(frozen=True)
class Logitech_G910(KeyboardInterface):

    devicename = "Logitech G910"
    usbVendor = 0x046d
    usbProduct = 0xc335
    usbInterface = 1

    numMacroKeys = 9
    numMemoryKeys = 3

    macroKeys = {
        b'\x11\xff\x08\x00\x01\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00': key.MACRO_1,
        b'\x11\xff\x08\x00\x02\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00': key.MACRO_2,
        b'\x11\xff\x08\x00\x04\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00': key.MACRO_3,
        b'\x11\xff\x08\x00\x08\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00': key.MACRO_4,
        b'\x11\xff\x08\x00\x10\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00': key.MACRO_5,
        b'\x11\xff\x08\x00 \x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00': key.MACRO_6,
        b'\x11\xff\x08\x00@\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00': key.MACRO_7,
        b'\x11\xff\x08\x00\x80\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00': key.MACRO_8,
        b'\x11\xff\x08\x00\x00\x01\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00': key.MACRO_9,
        b'\x02\x08': uinput.KEY_PLAYPAUSE,
        b'\x02\x04': uinput.KEY_STOP,
        b'\x02\x02': uinput.KEY_PREVIOUS,
        b'\x02\x01': uinput.KEY_NEXT,
        b'\x02@': uinput.KEY_MUTE,
        b'\x02\x10': uinput.KEY_VOLUMEUP,
        b'\x02 ': uinput.KEY_VOLUMEDOWN,
        b'\x11\xff\n\x00\x01\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00': key.MEMORY_RECORD,
    }

    memoryKeys = {
        b'\x11\xff\t\x00\x01\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00': key.MEMORY_1,
        b'\x11\xff\t\x00\x02\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00': key.MEMORY_2,
        b'\x11\xff\t\x00\x04\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00': key.MEMORY_3,
    }

    releaseEvents = {
        b'\x11\xff\x08\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00', # G release
        b'\x02\x00', # media key release
        b'\x11\xff\t\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00', # M release
        b'\x11\xff\n\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00', # MR release
    }

SUPPORTED_DEVICES = [
    Logitech_G910
]
